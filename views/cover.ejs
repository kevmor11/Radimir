<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head %>
  </head>
  <body>
    <% include ../partials/navbar %>
    <div class="upload-form">
      <form action="/cover" method="post" enctype="multipart/form-data">
        <h3 class="form-title">choose album cover</h3>

        <div class="form-group">
          <label for="album">album:</label>
          <select class="form-control" id="album-select" name="album" required >
            <option disabled selected value> -- select an album -- </option>
            <!-- For each album, render an <option> tag for the dropdown  -->
              <% albums.forEach((album, i) => { %>
                <option value="<%= album.id %>"><%= album.title %></option>
                <% }); %>
          </select>
        </div>
        <div class="form-group">
          <label for="title">cover image: (title - file name)</label>
          <select class="form-control" name="cover" required >
            <option disabled selected value> -- select a cover image -- </option>
            <!-- TODO figure out AJAX call so as to rerender second select tag based on first selection -->
            <% var slctdAlbumID = 19; %>
            <script>
              $( "#album-select" ).change(() => {
                slctdAlbumID = $('#album-select option:selected').val();
                console.log("ID", slctdAlbumID);
              });
            </script>
            <% images.filter((image) => image.album_id === 22).forEach((image, i) => { %>
              <option value="<%= image.id %>"><%= image.title + " - " + image.file_name %></option>
            <% }); %>
          </select>
        </div>
        <button class="btn btn-primary" type="submit" style="width: 10em; margin-left: 18em" value="Submit">submit</button>
      </form>
    </div>
  </body>
</html>
